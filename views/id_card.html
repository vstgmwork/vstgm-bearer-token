<!DOCTYPE html>
<html lang="en">

<head>
  <script defer src='https://cpqa.catchpoint.com/jp/237218/v4.0.9/InitialLoadScript.js'></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script language="javascript" type="text/javascript">
    function init() {
      var locales = ["af", "ax", "al", "dz", "as", "ad", "ao", "ai", "aq", "ag", "ar", "am", "aw", "au", "at", "az", "bs", "bh", "bd", "bb", "by", "be", "bz", "bj", "bm", "bt", "bo", "bq", "ba", "bw", "bv", "br", "io", "bn", "bg", "bf", "bi", "kh", "cm", "ca", "cv", "ky", "cf", "td", "cl", "cn", "cx", "cc", "co", "km", "cg", "cd", "ck", "cr", "ci", "hr", "cu", "cw", "cy", "cz", "dk", "dj", "dm", "do", "ec", "eg", "sv", "gq", "er", "ee", "et", "fk", "fo", "fj", "fi", "fr", "gf", "pf", "tf", "ga", "gm", "ge", "de", "gh", "gi", "gr", "gl", "gd", "gp", "gu", "gt", "gg", "gn", "gw", "gy", "ht", "hm", "va", "hn", "hk", "hu", "is", "in", "id", "ir", "iq", "ie", "im", "il", "it", "jm", "jp", "je", "jo", "kz", "ke", "ki", "kp", "kr", "kw", "kg", "la", "lv", "lb", "ls", "lr", "ly", "li", "lt", "lu", "mo", "mk", "mg", "mw", "my", "mv", "ml", "mt", "mh", "mq", "mr", "mu", "yt", "mx", "fm", "md", "mc", "mn", "me", "ms", "ma", "mz", "mm", "na", "nr", "np", "nl", "nc", "nz", "ni", "ne", "ng", "nu", "nf", "mp", "no", "om", "pk", "pw", "ps", "pa", "pg", "py", "pe", "ph", "pn", "pl", "pt", "pr", "qa", "re", "ro", "ru", "rw", "bl", "sh", "kn", "lc", "mf", "pm", "vc", "ws", "sm", "st", "sa", "sn", "rs", "sc", "sl", "sg", "sx", "sk", "si", "sb", "so", "za", "gs", "ss", "es", "lk", "sd", "sr", "sj", "sz", "se", "ch", "sy", "tw", "tj", "tz", "th", "tl", "tg", "tk", "to", "tt", "tn", "tr", "tm", "tc", "tv", "ug", "ua", "ae", "gb", "us", "um", "uy", "uz", "vu", "ve", "vn", "vg", "vi", "wf", "eh", "ye", "zm", "zw"
      ];
      var locale = locales[Math.floor(Math.random() * locales.length)];
      var randNum = Math.floor(Math.random() * 22 - 1) * 10;
      window.RProfiler.addInfo("tracepoint", "locale", locale);
      window.RProfiler.addInfo("indicator", "randnum", randNum);
    }
    window.RProfiler
      ? init()
      : window.addEventListener("GlimpseLoaded", init);
  </script>
  <link rel="icon" href="/logo.svg" type="image/svg+xml">
  <link rel="shortcut icon" href="/logo.ico" type="image/x-icon" />
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Student ID Generator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #f4f4f4;
    }

    .container {
      display: flex;
      gap: 40px;
      flex-wrap: wrap;
    }

    .form-section,
    .id-card-section {
      flex: 1;
      min-width: 300px;
    }

    .form-section input,
    .form-section textarea {
      width: 100%;
      margin-bottom: 10px;
      padding: 8px;
      font-size: 14px;
    }

    .id-card {
      width: 350px;
      height: 200px;
      padding: 15px;
      background: #ffffff;
      border: 2px solid #ccc;
      border-radius: 8px;
      position: relative;
      display: flex;
      gap: 10px;
      box-sizing: border-box;
    }

    .photo {
      width: 80px;
      height: 100px;
      background: #eee;
      object-fit: cover;
    }

    .logo {
      width: 50px;
      height: 50px;
      object-fit: contain;
    }

    .info {
      font-size: 12px;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .id-info {
      margin-left: 10px;
      width: 100%;
    }

    .download-btn {
      margin-top: 10px;
      padding: 10px 20px;
      font-size: 14px;
      cursor: pointer;
    }

    .info p {
      margin: 2px 0;
      line-height: 1.2em;
      word-wrap: break-word;
    }

    #addr {
      display: inline-block;
      max-height: 2.4em;
      /* 2 lines */
      overflow: hidden;
      text-overflow: ellipsis;
    }
  </style>
</head>

<body>
  <!-- Header Section -->
  <header class="flex flex-col items-center justify-center text-center py-12 px-4 sm:px-6 lg:px-8">
    <a href="/" class="flex items-center justify-center gap-4 mb-4">
      <img src="/logo.svg" alt="API Testbed Logo" class="h-16 w-16">
      <h1 class="text-4xl md:text-5xl font-bold text-slate-100">Developer API Testbed</h1>
    </a>
    <p class="mt-4 text-lg text-slate-400 max-w-3xl mx-auto">
      A live collection of REST API endpoints for developers and QA.
    </p>
  </header>
  <div class="container">
    <!-- Form Section -->
    <div class="form-section">
      <h2>Enter Student Information</h2>
      <label for="logoUpload">Upload School Logo</label>
      <input type="file" id="logoUpload" accept="image/*" />
      <br>
      <img id="logoPreview" src="/Ryan_International_Group_logo.png" alt="School Logo" width="100" />
      <label for="photoUpload">Upload Student Photo</label>
      <input type="file" id="photoUpload" accept="image/*" />
      <input type="text" id="schoolName" placeholder="School Name" />
      <input type="text" id="studentName" placeholder="Student Name" />
      <input type="text" id="grade" placeholder="Grade" />
      <input type="text" id="section" placeholder="Section" />
      <textarea id="address" placeholder="Home Address (max 70 characters)" maxlength="70"
        title="Address should be within 70 characters. Longer text will be truncated."></textarea>
      <small id="addressCounter" style="display: block; margin-bottom: 10px;">0 / 70</small>
      <input type="text" id="contact" placeholder="Contact Number" />
      <input type="text" id="busRoute" placeholder="Bus Route" />
      <input type="text" id="bloodGroup" placeholder="Blood Group" />
      <button class="download-btn" onclick="downloadID()">Download ID as JPEG</button>
    </div>

    <!-- ID Card Section -->
    <div class="id-card-section">
      <h2>ID Card Preview</h2>
      <div id="idCard" class="id-card">
        <img id="photo" class="photo" src="" alt="Student Photo" />
        <div class="id-info">
          <div class="top-bar">
            <span id="school" style="font-weight: bold; font-size: 13px;"></span>
            <img id="logo" class="logo" src="" alt="Logo" />
          </div>
          <div class="info">
            <p><strong>Name:</strong> <span id="name"></span></p>
            <p><strong>Grade:</strong> <span id="gradeVal"></span> <strong>Sec:</strong> <span id="secVal"></span></p>
            <p><strong>Address:</strong> <span id="addr"></span></p>
            <p><strong>Contact:</strong> <span id="phone"></span></p>
            <p><strong>Bus Route:</strong> <span id="bus"></span> <strong>Blood:</strong> <span id="blood"></span></p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- html2canvas for export -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script>
    const inputs = {
      school: document.getElementById('schoolName'),
      name: document.getElementById('studentName'),
      grade: document.getElementById('grade'),
      section: document.getElementById('section'),
      address: document.getElementById('address'),
      contact: document.getElementById('contact'),
      bus: document.getElementById('busRoute'),
      blood: document.getElementById('bloodGroup'),
    };

    const addressInput = document.getElementById('address');
    const counter = document.getElementById('addressCounter');
    addressInput.addEventListener('input', function () {
      counter.textContent = `${addressInput.value.length} / 70`;
    });

    // Set default logo
    const logo = document.getElementById('logo');
    const logoPreview = document.getElementById('logoPreview');
    const logoUpload = document.getElementById('logoUpload');
    const defaultLogo = '/Ryan_International_Group_logo.png';
    logo.src = defaultLogo;
    logoPreview.src = defaultLogo;

    logoUpload.addEventListener('change', function (e) {
      const file = e.target.files[0];
      if (file) {
        const url = URL.createObjectURL(file);
        logoPreview.src = url;
        logo.src = url;
      }
    });

    document.getElementById('photoUpload').addEventListener('change', function (e) {
      const reader = new FileReader();
      reader.onload = function (event) {
        document.getElementById('photo').src = event.target.result;
      };
      reader.readAsDataURL(e.target.files[0]);
    });

    function updateIDCard() {
      document.getElementById('school').textContent = inputs.school.value;
      document.getElementById('name').textContent = inputs.name.value;
      document.getElementById('gradeVal').textContent = inputs.grade.value;
      document.getElementById('secVal').textContent = inputs.section.value;
      document.getElementById('addr').textContent = inputs.address.value;
      document.getElementById('phone').textContent = inputs.contact.value;
      document.getElementById('bus').textContent = inputs.bus.value;
      document.getElementById('blood').textContent = inputs.blood.value;
    }

    for (let key in inputs) {
      inputs[key].addEventListener('input', updateIDCard);
    }

    function downloadID() {
      html2canvas(document.getElementById('idCard')).then(canvas => {
        const link = document.createElement('a');
        link.download = 'student_id_card.jpeg';
        link.href = canvas.toDataURL('image/jpeg');
        link.click();
      });
    }
  </script>

</body>

</html>